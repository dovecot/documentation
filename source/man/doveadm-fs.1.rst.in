.. _man-1_doveadm-fs:

==========
doveadm-fs
==========

NAME
====

doveadm-fs - Interact with the abstract mail storage filesystem

doveadm-mail-fs - Interact with the abstract mail storage filesystem in user context

SYNOPSIS
========

**doveadm** [**-Dv**] [**-f** *formatter*] **fs** *command* *config-filter-name* [*arguments*]

**doveadm** [**-Dv**] [**-f** *formatter*] **mail fs** *command* [*options*] *config-filter-name* [*arguments*]

DESCRIPTION
===========

The **doveadm fs** and **doveadm mail fs** *commands* are used to abstractly interact with the
storage backend defined in the Dovecot configuration. It allows access
to the mailbox structure without needing to know details of how the
storage backend is designed.

The **doveadm mail fs** commands can be used within a specific user context.
This may be useful if e.g. userdb lookup returns user-specific fs settings.
Otherwise the commands behave identically.

*config-filter-name*
    Filter name to use when looking up the fs settings. For example
    *mail_attachment*, *obox*, *metacache*, *fts/dovecot*. It's also
    possible to use an empty filter name and specify the fs settings using
    the **-o** parameters.

.. include:: global-options-formatter.inc

**doveadm mail fs** command specific *options*:

.. include:: option-A.inc

.. include:: option-F-file.inc

.. include:: option-S-socket.inc

.. include:: option-u-user.inc


COMMANDS
========

copy
----

**doveadm fs copy** *config-filter-name* *source-path* *dest-path*

**doveadm mail fs copy** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *source-path* *dest-path*

Copy source path to the destination path.

delete
------

**doveadm fs delete** [**-R**] [**-n** *count*] *config-filter-name* *path* [*path* ...]

**doveadm mail fs delete** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] [**-R**] [**-n** *count*] *config-filter-name* *path* [*path* ...]

Delete all data associated with the path provided.

**-R**
  Recursively delete files.
**-n** *count*
  Maximum number of parallel operations to perform.

get
---

**doveadm fs get** *config-filter-name* *path*

**doveadm mail fs get** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *path*

Retrieve data associated with the path provided.

iter
----

**doveadm fs iter** *config-filter-name* *path*

**doveadm mail fs iter** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *path*

Iterate through all data files in the path provided.

iter-dirs
---------

**doveadm fs iter-dirs** *config-filter-name* *path*

**doveadm mail fs iter-dirs** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *path*

Iterate through all directories in the path provided.

put
---

**doveadm fs put** [**-h** *hash*] *config-filter-name* *input_path* *path*

**doveadm mail fs put** [**-h** *hash*] [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *input_path* *path*

Store data at the path provided.

**-h** *hash*
  Save provided hash as content hash. Must be either MD5 or SHA256 in hexdigits.
**-m** *key=value*
  Assign a value to a metadata. Can be provided as many times as needed. Requires
  either metawrap as driver or metadata capable FS-driver.

stat
----

**doveadm fs stat** *config-filter-name* *path*

**doveadm mail fs stat** [**-A** | **-u** *user* | **-F** *file*] [**-S** *socket_path*] *config-filter-name* *path*

Retrieve files status for the path provided. Currently, only the total
size (in bytes) of the item is returned.

.. include:: reporting-bugs.inc

SEE ALSO
========

:man:`doveadm(1)`
