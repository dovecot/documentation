---
layout: doc
title: 2.4 to 2.4.x
dovecotlinks:
  upgrading-2.4-to-2.4: Upgrading Dovecot CE from 2.4 to 2.4.x
---

# Upgrading Dovecot CE from 2.4 to 2.4.x

## Dovecot CE

### v2.4.0 to v2.4.1

 * Added `MALLOC_MMAP_THRESHOLD_=131072` to [[setting,import_environment]] when
   building with glibc. Note that [[setting,dovecot_config_version]] value does
   not affect change - it's always added.

#### Changed Setting Defaults

These changes don't take effect until [[setting,dovecot_config_version]] is
changed from `2.4.0` to `2.4.1`.

| Setting | Old Default Value | New Default Value |
| ------- | ----------------- | ----------------- |
| [[setting,mail_cache_fields]] | flags | flags hdr.date hdr.subject hdr.from hdr.sender hdr.reply-to hdr.to hdr.cc hdr.bcc hdr.in-reply-to hdr.message-id date.received size.virtual imap.bodystructure mime.parts hdr.references hdr.importance hdr.x-priority hdr.x-open-xchange-share-url pop3.uidl pop3.order |
| `service/auth/unix_listener/auth-userdb/group` | (empty = root) | `$SET:default_internal_group` |
| `service/lmtp/restart_request_count` | unlimited | 1 |
| [[setting,lmtp_user_concurrency_limit]] | unlimited | 10 |

### v2.4.1 to v2.4.2

#### Changed Setting Defaults

These changes don't take effect until [[setting,dovecot_config_version]] is
changed to `2.4.2`.

| Setting | Old Default Value | New Default Value |
| ------- | ----------------- | ----------------- |
| `@metric_defaults/proxy/metric` |  | Adds proxy_session_established |
| `service/anvil/unix_listener/anvil/mode` | `0600` | `0660` |
| `service/anvil/unix_listener/anvil/group` | (empty = root) | `$SET:default_internal_group` |
| [[setting,mailbox_directory_name_legacy]] | `yes` | `no` |
| [[setting,mail_attachment_detection_options]] |  | `add-flags content-type=!application/signature` |

### v2.4.2 to v2.4.3

#### Changed Setting Defaults

These changes don't take effect until [[setting,dovecot_config_version]] is
changed to `2.4.3`.

| Setting | Old Default Value | New Default Value |
| ------- | ----------------- | ----------------- |
| [[setting,fts_message_max_size]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,last_valid_gid]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,last_valid_uid]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,lazy_expunge_only_last_instance]] | `no` | `yes` |
| [[setting,mail_access_groups]] |  | [[setting,default_internal_group]] |
| [[setting,mail_cache_max_header_name_length]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,mail_cache_max_headers_count]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,mail_sort_max_read_count]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,mail_vsize_bg_after_count]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,passdb_default_password_scheme]] | `PLAIN` | `CRYPT` |
| [[setting,sieve_quota_script_count]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,sieve_quota_storage_size]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| [[setting,submission_max_recipients]] |  | 0 is not allowed anymore to mean unlimited<br>use `unlimited` instead |
| `maildir/mail_attachment_detection_options` | `add-flags content-type=!application/signature` |  |
| `passdb_passwd_file/passdb_default_password_scheme` | `PLAIN` | `CRYPT` |
| `passdb_sql/passdb_default_password_scheme` | `PLAIN` | `CRYPT` |
| `service/doveadm/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/imap/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/imap-urlauth-worker/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/indexer-worker/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/lmtp/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/pop3/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/submission/service_extra_groups` | [[setting,default_internal_group]] | |
| `service/managesieve/service_extra_groups` | [[setting,default_internal_group]] | |
| `@mailbox_defaults/english/namespace/inbox/mailbox/Drafts/mailbox_auto` | `no` | `subscribe` |
| `@mailbox_defaults/english/namespace/inbox/mailbox/Junk/mailbox_auto` | `no` | `subscribe` |
| `@mailbox_defaults/english/namespace/inbox/mailbox/Sent/mailbox_auto` | `no` | `subscribe` |
| `@mailbox_defaults/english/namespace/inbox/mailbox/Trash/mailbox_auto` | `no` | `subscribe` |
| `unix_listener/anvil-auth-penalty/mode` | `0600` | `0660` | |
| `unix_listener/anvil-auth-penalty/group` | | [[setting,default_internal_group]] | |

#### Removed Features

| Feature | Notes |
| ------- | ----- |
| [[setting,acl_global_path]] setting | See [[link,upgrading_2_4_acls]]. |
